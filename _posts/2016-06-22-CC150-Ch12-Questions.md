---
layout: post
title: CC150 Chapter 22---Testing Questions
date: 2016-06-22
categories: blog
tags: [study]

---

### 找bug

```c
unsigned int i;
for (int i = 100; i >= 0; --i) {
    printf("%d\n", i);
}
```

1. 变量i是unsigned int，所以永远会大于等于0，循环不会结束
2. 变量i是unsigned int，所以打印时要用%u

### 你被告知程序在运行时崩溃，但你在debugger里运行了多次却从没在那里崩溃，程序是单线程，只用c标准库的。有可能是什么错误？你会怎么进行测试？

我们可以看出这是个随机错误：

1. 随机变量。程序中的随机变量可能有问题，包括用户输入，程序随机数或者时间。
2. 未初始化变量。未初始化变量的初始值在不同环境可能不同。
3. 内存泄漏。这取决于同时运行的其它进程。
4. 外部依赖。程序可能依赖其它程序。

此外，操作的不同可能导致看似随机错误，如只有在进行I/O操作时才会出错。

### 象棋游戏中有这样一个方法canMoveTo(int x, in y)，返回当前棋子是否能移动到指定地点，对这个方法进行测试

我们进行两类测试极端测试(extreme case validation)和普通测试(general case testing)。

##### 1. 极端测试

* x和y取负值
* x比宽大
* y比高大
* 用一个满了的棋盘测试
* 用一个空的棋盘测试
* 用一个白棋远多于黑棋的棋盘
* 用一个黑棋远多于白棋的棋盘

##### 2. 普通测试

关键点在于说明我们不能测试所有的可能情况

```java
foreach piece a:
    foreach other type of piece b (6 types + empty space)
        foreach direction d
            create a board with piece a.
            place piece b in direction d.
            try to move - check return value.
```

### 如何不使用任何测试工具，对一个网页进行负载测试(load test)

负载测试目的：

* 测试网站最大运营能力
* 网站瓶颈
* 对于不同负载的响应速度

评价标准：

* Response time（响应时间）
* Throughput（吞吐量）
* Resource utilization（资源利用率）
* Maximum load that the system can bear（最大负载量）

缺乏测试工具的情况下，我们可以自己创造情景，比如测试并发：用多线程创造成千的虚拟用户，对于每一个用户测试响应时间，数据量。

### 如何测试一支钢笔

检测的事**理解限制条件与有条理地解决问题**的能力

##### 理解限制条件

问面试官问题以理解"who what where when how why"。时刻谨记好的测试人员在测试前要完全了解他要测试的东西。

可能的问题：  
1. 谁会使用？
2. 用途？写字，画画？
3. 在哪里写？纸？衣服？墙？
4. 顶端类型？felt(毛毡)？还是ball point(圆珠)？

测试：  
* 特征检测：确定是毛毡顶端等等
* 用途：衣服画画。是否正常在衣服上画画？
* 用途：可洗。是否可以从衣服上洗掉（即是很长时间后）？在热水，温水，冷水中洗掉？
* 安全：是否无毒？
* 非目的用途：儿童还可能如何使用？踩，扔？确保钢笔经受住考验。

### 如何测试一个分布式银行系统的ATM机

首先，搞清楚问题的前提条件：

* 谁会使用这台ATM机？是任何人，还是盲人，还是其他什么人？
* 用途是什么？取钱，转账，查询余额，还是有其他什么用途？
* 我们有什么测试工具？我们能接触到代码还是只能接触ATM机

然后，分解问题：

* 登陆
* 取钱
* 存钱
* 查询余额
* 转账

最后，手动测试与自动化测试：

* 手动测试遍历上面的步骤，保证检查到所有情形（余额不足，新账户，不存在的账户等等）
* 自动化测试包括自动化所有标准情景，以及竞争等特殊情境。即即是同一用户同一时间在不同地点存取钱，他也不会获得或者失去意料之外的钱。